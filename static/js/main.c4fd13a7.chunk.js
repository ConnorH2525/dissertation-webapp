(this["webpackJsonpdissertation-webapp"]=this["webpackJsonpdissertation-webapp"]||[]).push([[0],{88:function(e,t,r){},90:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r.n(c),a=r(31),s=r.n(a),o=r(18),i=r.n(o),l=r(28),u=r(10),j=r(103),d=r(95),b=r(98),p=r(96),h=r(15),O=r(64),x=(r(75),r(33),r(91),O.a.initializeApp({apiKey:"AIzaSyDcGH9CVe-4v606mpCWpl2jR7t2e5G_HGE",authDomain:"dissertation-webapp-dev-d348c.firebaseapp.com",projectId:"dissertation-webapp-dev-d348c",storageBucket:"dissertation-webapp-dev-d348c.appspot.com",messagingSenderId:"408993397806",appId:"1:408993397806:web:2056767b5227ff85a4f3bf"})),m=x.firestore(),f={groups:m.collection("groups"),files:m.collection("files"),formatDoc:function(e){return Object(h.a)({id:e.id},e.data())},getCurrentTimestamp:O.a.firestore.FieldValue.serverTimestamp},g=x.storage(),v=x.auth(),y=x,F=r(2),C=n.a.createContext();function w(){return Object(c.useContext)(C)}function k(e){var t=e.children,r=Object(c.useState)(),n=Object(u.a)(r,2),a=n[0],s=n[1],o=Object(c.useState)(!0),j=Object(u.a)(o,2),d=j[0],b=j[1];function p(){return(p=Object(l.a)(i.a.mark((function e(t,r,c){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.createUserWithEmailAndPassword(t,r);case 3:n=y.auth().currentUser,y.firestore().collection("users").doc(n.uid).set({userId:n.uid,username:c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(c.useEffect)((function(){return v.onAuthStateChanged((function(e){s(e),b(!1)}))}),[]);var h={currentUser:a,login:function(e,t){return v.signInWithEmailAndPassword(e,t)},signup:function(e,t,r){return p.apply(this,arguments)},logout:function(){return v.signOut()},resetPassword:function(e){return v.sendPasswordResetEmail(e)},updateEmail:function(e){return a.updateEmail(e)},updatePassword:function(e){return a.updatePassword(e)}};return Object(F.jsx)(C.Provider,{value:h,children:!d&&t})}var B=r(14),N=r(12),S=r(94),G=function(e){var t=e.children;return Object(F.jsx)(S.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(F.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:t})})},D=r(100),I=r(99),L=function(){var e=w().currentUser,t=Object(c.useState)(""),r=Object(u.a)(t,2),n=r[0],a=r[1];return Object(c.useEffect)((function(){y.firestore().collection("users").doc(e.uid).get().then((function(e){a(f.formatDoc(e))}))}),[]),Object(F.jsx)(I.a,{className:"ml-auto",children:Object(F.jsxs)(I.a.Link,{style:{color:"lightgrey"},as:N.b,to:"/user",children:["Hi ",n.username]})})},A=function(){return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(I.a,{className:"ml-auto",children:[Object(F.jsx)(I.a,{children:Object(F.jsx)(I.a.Link,{as:N.b,style:{color:"lightgrey"},to:"/signup",children:"Create Account"})}),Object(F.jsx)(I.a,{children:Object(F.jsx)(I.a.Link,{as:N.b,style:{color:"lightgrey"},to:"/login",children:"Login"})})]})})},P=function(){var e=w().currentUser?Object(F.jsx)(L,{}):Object(F.jsx)(A,{});return Object(F.jsxs)(D.a,{style:{backgroundColor:"#212121",justifyContent:"center"},children:[Object(F.jsx)(D.a.Brand,{id:"title",as:N.b,style:{fontWeight:"bold",color:"white"},to:"/",children:"FellowFrame"}),e]})},E=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),r=Object(c.useRef)(),n=w().signup,a=Object(c.useState)(""),s=Object(u.a)(a,2),o=s[0],h=s[1],O=Object(c.useState)(""),x=Object(u.a)(O,2),m=x[0],f=x[1],g=Object(c.useState)(!1),v=Object(u.a)(g,2),y=v[0],C=v[1],k=Object(B.g)();function S(){return(S=Object(l.a)(i.a.mark((function c(a){return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a.preventDefault(),t.current.value===r.current.value){c.next=3;break}return c.abrupt("return",f("Passwords do not match"));case 3:return c.prev=3,f(""),C(!0),c.next=8,n(e.current.value,t.current.value,o);case 8:k.push("/"),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(3),f("Failed to create an account");case 14:C(!1);case 15:case"end":return c.stop()}}),c,null,[[3,11]])})))).apply(this,arguments)}return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(P,{}),Object(F.jsx)("div",{style:{backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(G,{children:[Object(F.jsx)(j.a,{style:{backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(j.a.Body,{children:[Object(F.jsx)("h2",{className:"text-center mb-4",children:"Create Account"}),m&&Object(F.jsx)(d.a,{variant:"danger",children:m}),Object(F.jsxs)(b.a,{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(F.jsxs)(b.a.Group,{children:[Object(F.jsx)(b.a.Label,{children:"First Name"}),Object(F.jsx)(b.a.Control,{type:"text",name:"username",id:"username",required:!0,value:o,onChange:function(e){h(e.target.value)}})]}),Object(F.jsxs)(b.a.Group,{id:"email",children:[Object(F.jsx)(b.a.Label,{children:"Email"}),Object(F.jsx)(b.a.Control,{type:"email",ref:e,required:!0})]}),Object(F.jsxs)(b.a.Group,{id:"password",children:[Object(F.jsx)(b.a.Label,{children:"Password"}),Object(F.jsx)(b.a.Control,{type:"password",ref:t,required:!0})]}),Object(F.jsxs)(b.a.Group,{id:"password-confirm",children:[Object(F.jsx)(b.a.Label,{children:"Password Confirmation"}),Object(F.jsx)(b.a.Control,{type:"password",ref:r,required:!0})]}),Object(F.jsx)(p.a,{disabled:y,className:"w-100",type:"submit",style:{backgroundColor:"#FF6B09",borderColor:"#FF6B09"},children:"Create Account"})]})]})}),Object(F.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(F.jsx)(N.b,{style:{color:"#FF6B09"},to:"/login",children:"Log In"})]})]})})]})},W=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),r=t[0],n=t[1],a=w(),s=a.currentUser,o=a.logout,b=Object(B.g)(),h=Object(c.useState)(""),O=Object(u.a)(h,2),x=O[0],m=O[1];function g(){return(g=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,o();case 4:b.pushState("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){y.firestore().collection("users").doc(s.uid).get().then((function(e){m(f.formatDoc(e))}))}),[]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(P,{}),Object(F.jsx)("div",{style:{backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(G,{children:[Object(F.jsx)("div",{className:"w-100 text-left mt-2",children:Object(F.jsx)(N.b,{style:{fontWeight:"bold",color:"#FF6B09"},to:"/",children:"< Groups"})}),Object(F.jsx)("div",{style:{padding:"5px"}}),Object(F.jsx)(j.a,{style:{backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(j.a.Body,{children:[Object(F.jsxs)("h2",{className:"text-center mb-4",children:["Hi ",x.username,"!"]}),Object(F.jsx)("hr",{}),Object(F.jsx)("h5",{className:"text-center mb-4",children:"Profile"}),r&&Object(F.jsx)(d.a,{variant:"danger",children:r}),Object(F.jsx)("strong",{children:"Email: "}),s.email,Object(F.jsx)(N.b,{to:"/update-profile",className:"btn btn-primary w-100 mt-3",style:{backgroundColor:"#FF6B09",borderColor:"#FF6B09"},children:"Update Profile"})]})}),Object(F.jsxs)("div",{className:"w-100 text-center mt-2",children:["Not you?",Object(F.jsx)(p.a,{variant:"link",onClick:function(){return g.apply(this,arguments)},style:{color:"#FF6B09"},children:"Log Out"})]})]})})]})},U=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),r=w().login,n=Object(c.useState)(""),a=Object(u.a)(n,2),s=a[0],o=a[1],h=Object(c.useState)(!1),O=Object(u.a)(h,2),x=O[0],m=O[1],f=Object(B.g)();function g(){return(g=Object(l.a)(i.a.mark((function c(n){return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,o(""),m(!0),c.next=6,r(e.current.value,t.current.value);case 6:f.push("/"),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),o("Failed to log in");case 12:m(!1);case 13:case"end":return c.stop()}}),c,null,[[1,9]])})))).apply(this,arguments)}return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(P,{}),Object(F.jsx)("div",{style:{backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(G,{children:[Object(F.jsx)(j.a,{style:{backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(j.a.Body,{children:[Object(F.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),s&&Object(F.jsx)(d.a,{variant:"danger",children:s}),Object(F.jsxs)(b.a,{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(F.jsxs)(b.a.Group,{id:"email",children:[Object(F.jsx)(b.a.Label,{children:"Email"}),Object(F.jsx)(b.a.Control,{type:"email",ref:e,required:!0})]}),Object(F.jsxs)(b.a.Group,{id:"password",children:[Object(F.jsx)(b.a.Label,{children:"Password"}),Object(F.jsx)(b.a.Control,{type:"password",ref:t,required:!0})]}),Object(F.jsx)(p.a,{disabled:x,className:"w-100",type:"submit",style:{backgroundColor:"#FF6B09",borderColor:"#FF6B09"},children:"Log In"})]}),Object(F.jsx)("div",{className:"w-100 text-center mt-3",children:Object(F.jsx)(N.b,{style:{color:"#FF6B09"},to:"/forgot-password",children:"Forgot Password?"})})]})}),Object(F.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(F.jsx)(N.b,{style:{color:"#FF6B09"},to:"/signup",children:"Create Account"})]})]})})]})},T=r(69),R=function(e){var t=e.component,r=Object(T.a)(e,["component"]),c=w().currentUser;return Object(F.jsx)(B.b,Object(h.a)(Object(h.a)({},r),{},{render:function(e){return c?Object(F.jsx)(t,Object(h.a)({},e)):Object(F.jsx)(B.a,{to:"/login"})}}))},q=function(){var e=Object(c.useRef)(),t=w().resetPassword,r=Object(c.useState)(""),n=Object(u.a)(r,2),a=n[0],s=n[1],o=Object(c.useState)(""),h=Object(u.a)(o,2),O=h[0],x=h[1],m=Object(c.useState)(!1),f=Object(u.a)(m,2),g=f[0],v=f[1];function y(){return(y=Object(l.a)(i.a.mark((function r(c){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c.preventDefault(),r.prev=1,x(""),s(""),v(!0),r.next=7,t(e.current.value);case 7:x("Check your email to reset password"),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),s("Failed to reset password");case 13:v(!1);case 14:case"end":return r.stop()}}),r,null,[[1,10]])})))).apply(this,arguments)}return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(P,{}),Object(F.jsx)("div",{style:{backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(G,{children:[Object(F.jsx)(j.a,{style:{backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(j.a.Body,{children:[Object(F.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),a&&Object(F.jsx)(d.a,{variant:"danger",children:a}),O&&Object(F.jsx)(d.a,{variant:"success",children:O}),Object(F.jsxs)(b.a,{onSubmit:function(e){return y.apply(this,arguments)},children:[Object(F.jsxs)(b.a.Group,{id:"email",children:[Object(F.jsx)(b.a.Label,{children:"Email"}),Object(F.jsx)(b.a.Control,{type:"email",ref:e,required:!0})]}),Object(F.jsx)(p.a,{disabled:g,className:"w-100",type:"submit",style:{backgroundColor:"#FF6B09",borderColor:"#FF6B09"},children:"Reset Password"})]}),Object(F.jsx)("div",{className:"w-100 text-center mt-3",children:Object(F.jsx)(N.b,{style:{color:"#FF6B09"},to:"/login",children:"Log In"})})]})}),Object(F.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(F.jsx)(N.b,{style:{color:"#FF6B09"},to:"/signup",children:"Sign Up"})]})]})})]})},z=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),r=Object(c.useRef)(),n=w(),a=n.currentUser,s=n.updateEmail,o=n.updatePassword,i=Object(c.useState)(""),l=Object(u.a)(i,2),h=l[0],O=l[1],x=Object(c.useState)(!1),m=Object(u.a)(x,2),f=m[0],g=m[1],v=Object(B.g)(),C=Object(c.useState)(""),k=Object(u.a)(C,2),S=k[0],D=k[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(P,{}),Object(F.jsx)("div",{style:{backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(G,{children:[Object(F.jsx)(j.a,{style:{backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(j.a.Body,{children:[Object(F.jsx)("h2",{className:"text-center mb-4",children:"Update Profile"}),h&&Object(F.jsx)(d.a,{variant:"danger",children:h}),Object(F.jsxs)(b.a,{onSubmit:function(c){if(c.preventDefault(),t.current.value!==r.current.value)return O("Passwords do not match");var n=[];g(!0),O(""),e.current.value!==a.email&&n.push(s(e.current.value)),t.current.value&&n.push(o(t.current.value)),S&&n.push(function(e){y.firestore().collection("users").doc(a.uid).set({userId:a.uid,username:e})}(S)),Promise.all(n).then((function(){v.push("/user")})).catch((function(){O("Failed to update account")})).finally((function(){g(!1)}))},children:[Object(F.jsxs)(b.a.Group,{children:[Object(F.jsx)(b.a.Label,{children:"First Name"}),Object(F.jsx)(b.a.Control,{type:"text",placeholder:"Change your name here",onChange:function(e){return D(e.target.value)}})]}),Object(F.jsxs)(b.a.Group,{id:"email",children:[Object(F.jsx)(b.a.Label,{children:"Email"}),Object(F.jsx)(b.a.Control,{type:"email",ref:e,required:!0,defaultValue:a.email})]}),Object(F.jsxs)(b.a.Group,{id:"password",children:[Object(F.jsx)(b.a.Label,{children:"Password"}),Object(F.jsx)(b.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same"})]}),Object(F.jsxs)(b.a.Group,{id:"password-confirm",children:[Object(F.jsx)(b.a.Label,{children:"Password Confirmation"}),Object(F.jsx)(b.a.Control,{type:"password",ref:r,placeholder:"Leave blank to keep the same"})]}),Object(F.jsx)(p.a,{disabled:f,className:"w-100",type:"submit",style:{backgroundColor:"#FF6B09",borderColor:"#FF6B09"},children:"Update"})]})]})}),Object(F.jsx)("div",{className:"w-100 text-center mt-2",children:Object(F.jsx)(N.b,{style:{color:"#FF6B09"},to:"/user",children:"Back"})})]})})]})},H=r(34),M=r(97),J=r(23),V=r(24),_="select-group",K="update-folder",Q="set-groups",X="set-child-files",Y={name:"Groups",id:null,path:[]};function Z(e,t){var r=t.type,c=t.payload;switch(r){case _:return{groupId:c.groupId,group:c.group,groups:[],childFiles:[]};case K:return Object(h.a)(Object(h.a)({},e),{},{group:c.group});case Q:return Object(h.a)(Object(h.a)({},e),{},{groups:c.groups});case X:return Object(h.a)(Object(h.a)({},e),{},{childFiles:c.childFiles});default:return e}}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=Object(c.useReducer)(Z,{groupId:e,group:t,groups:[],childFiles:[]}),n=Object(u.a)(r,2),a=n[0],s=n[1],o=w(),i=o.currentUser;return Object(c.useEffect)((function(){s({type:_,payload:{groupId:e,group:t}})}),[e,t]),Object(c.useEffect)((function(){if(null==e)return s({type:K,payload:{group:Y}});f.groups.doc(e).get().then((function(e){s({type:K,payload:{group:f.formatDoc(e)}})})).catch((function(){s({type:K,payload:{group:Y}})}))}),[e]),Object(c.useEffect)((function(){return f.groups.where("parentId","==",e).where("members","array-contains",i.uid).orderBy("createdAt").onSnapshot((function(e){s({type:Q,payload:{groups:e.docs.map(f.formatDoc)}})}))}),[e,i]),Object(c.useEffect)((function(){return f.files.where("groupId","==",e).orderBy("createdAt").onSnapshot((function(e){s({type:X,payload:{childFiles:e.docs.map(f.formatDoc)}})}))}),[e,i]),a}var ee=function(e){var t=e.currentGroup,r=Object(c.useState)(!1),n=Object(u.a)(r,2),a=n[0],s=n[1],o=Object(c.useState)(""),i=Object(u.a)(o,2),l=i[0],j=i[1],d=w().currentUser;function h(){s(!1)}return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(p.a,{onClick:function(){s(!0)},style:{backgroundColor:"rgba(0, 0, 0, 0)",minWidth:"150px",marginTop:"10px",color:"#FF6B09",borderColor:"#FF6B09"},children:[Object(F.jsx)(J.a,{icon:V.d,size:"3x",style:{color:"#212121"}}),Object(F.jsx)("p",{children:"Create Group"})]}),Object(F.jsx)(M.a,{show:a,onHide:h,children:Object(F.jsxs)(b.a,{onSubmit:function(e){if(e.preventDefault(),null!=t){var r=Object(H.a)(t.path);t!==Y&&r.push({name:t.name,id:t.id}),f.groups.add({name:l,creatorId:d.uid,parentId:t.id,path:r,createdAt:f.getCurrentTimestamp(),members:[d.uid]}),j(""),h()}},children:[Object(F.jsx)(M.a.Body,{children:Object(F.jsxs)(b.a.Group,{children:[Object(F.jsx)(b.a.Label,{children:"Group Name"}),Object(F.jsx)(b.a.Control,{type:"text",required:!0,value:l,onChange:function(e){return j(e.target.value)}})]})}),Object(F.jsxs)(M.a.Footer,{children:[Object(F.jsx)(p.a,{variant:"secondary",onClick:h,style:{backgroundColor:"#212121",borderColor:"#212121"},children:"Close"}),Object(F.jsx)(p.a,{variant:"success",type:"submit",style:{backgroundColor:"#FF6B09",borderColor:"#FF6B09"},children:"Create Group"})]})]})})]})},te=r(102),re=r(101),ce=r(104),ne=function(e){var t=e.currentGroup,r=Object(c.useState)([]),n=Object(u.a)(r,2),a=n[0],o=n[1],i=w().currentUser,l=Object(c.useState)(""),j=Object(u.a)(l,2),d=j[0],b=j[1];return Object(c.useEffect)((function(){y.firestore().collection("users").doc(i.uid).get().then((function(e){b(f.formatDoc(e))}))}),[]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{style:{marginTop:"10px"}}),Object(F.jsxs)("label",{className:"btn m-0 mr-2 pt-3",style:{backgroundColor:"rgba(0, 0, 0, 0)",minWidth:"150px",color:"#FF6B09",borderColor:"#FF6B09"},children:[Object(F.jsx)(J.a,{icon:V.c,size:"3x",style:{color:"#212121"}}),Object(F.jsx)("p",{children:"Upload Media"}),Object(F.jsx)("input",{type:"file",onChange:function(e){var r=e.target.files[0];if(null!=t&&null!=r){var c=Object(te.a)(0);o((function(e){return[].concat(Object(H.a)(e),[{id:c,name:r.name,progress:0,error:!1}])}));var n=t===Y?"".concat(t.path.join("/"),"/").concat(r.name):"".concat(t.path.join("/"),"/").concat(t.name,"/").concat(r.name),a=g.ref("/files/".concat(i.uid,"/").concat(n)).put(r);a.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes;o((function(e){return e.map((function(e){return e.id===c?Object(h.a)(Object(h.a)({},e),{},{progress:t}):e}))}))}),(function(){o((function(e){return e.map((function(e){return e.id===c?Object(h.a)(Object(h.a)({},e),{},{error:!0}):e}))}))}),(function(){o((function(e){return e.filter((function(e){return e.id!==c}))})),a.snapshot.ref.getDownloadURL().then((function(e){f.files.where("name","==",r.name).where("userId","==",i.uid).where("folderId","==",t.id).get().then((function(c){var n=c.docs[0];n?n.ref.update({url:e}):f.files.add({isText:!1,url:e,name:r.name,createdAt:f.getCurrentTimestamp(),groupId:t.id,username:d.username})}))}))}))}},style:{opacity:0,position:"absolute",left:"-9999px"}})]}),a.length>0&&s.a.createPortal(Object(F.jsx)("div",{style:{position:"absolute",bottom:"1rem",right:"1rem",maxWidth:"250px"},children:a.map((function(e){return Object(F.jsxs)(re.a,{onClose:function(){o((function(t){return t.filter((function(t){return t.id!==e.id}))}))},children:[Object(F.jsx)(re.a.Header,{closeButton:e.error,className:"text-truncate w-100 d-block",children:e.name}),Object(F.jsx)(re.a.Body,{children:Object(F.jsx)(ce.a,{animated:!e.error,variant:e.error?"danger":"primary",now:e.error?100:100*e.progress,label:e.error?"Error":"".concat(Math.round(100*e.progress),"%")})})]},e.id)}))}),document.body)]})},ae=function(e){var t=e.currentGroup,r=Object(c.useState)(!1),n=Object(u.a)(r,2),a=n[0],s=n[1],o=Object(c.useState)(""),i=Object(u.a)(o,2),l=i[0],j=i[1],d=w().currentUser,h=Object(c.useState)(""),O=Object(u.a)(h,2),x=O[0],m=O[1];function g(){s(!1)}return Object(c.useEffect)((function(){y.firestore().collection("users").doc(d.uid).get().then((function(e){m(f.formatDoc(e))}))}),[]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{style:{marginTop:"10px"}}),Object(F.jsxs)(p.a,{onClick:function(){s(!0)},style:{backgroundColor:"rgba(0, 0, 0, 0)",minWidth:"150px",paddingTop:"10px",color:"#FF6B09",borderColor:"#FF6B09"},children:[Object(F.jsx)(J.a,{icon:V.a,size:"3x",style:{color:"#212121"}}),Object(F.jsx)("p",{children:"Upload Message"})]}),Object(F.jsx)(M.a,{show:a,onHide:g,children:Object(F.jsxs)(b.a,{onSubmit:function(e){e.preventDefault(),null!=t&&(f.files.add({isText:!0,text:l,createdAt:f.getCurrentTimestamp(),groupId:t.id,username:x.username}),j(""),g())},children:[Object(F.jsx)(M.a.Body,{children:Object(F.jsxs)(b.a.Group,{children:[Object(F.jsx)(b.a.Label,{children:"Enter Message"}),Object(F.jsx)(b.a.Control,{type:"text",required:!0,value:l,onChange:function(e){return j(e.target.value)}})]})}),Object(F.jsxs)(M.a.Footer,{children:[Object(F.jsx)(p.a,{variant:"secondary",onClick:g,style:{backgroundColor:"#212121",borderColor:"#212121"},children:"Close"}),Object(F.jsx)(p.a,{variant:"success",type:"submit",style:{backgroundColor:"#FF6B09",borderColor:"#FF6B09"},children:"Upload Message"})]})]})})]})},se=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),r=t[0],n=t[1],a=Object(c.useState)(""),s=Object(u.a)(a,2),o=s[0],j=s[1],d=[],h=w().currentUser;function O(){n(!1)}function x(){return(x=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.firestore(),e.prev=1,e.next=4,t.collection("groups").doc(o).get().then((function(e){console.log(e.data().members),(d=Object(H.a)(e.data().members)).some((function(e){return e.uid!==d}))&&(d.push(h.uid),console.log(d),t.collection("groups").doc(o).update({members:d}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(p.a,{onClick:function(){n(!0)},style:{backgroundColor:"rgba(0, 0, 0, 0)",minWidth:"150px",marginTop:"10px",marginLeft:"10px",color:"#FF6B09",borderColor:"#FF6B09"},children:[Object(F.jsx)(J.a,{icon:V.d,size:"3x",style:{color:"#212121"}}),Object(F.jsx)("p",{children:"Join Group"})]}),Object(F.jsx)(M.a,{show:r,onHide:O,children:Object(F.jsxs)(b.a,{onSubmit:function(e){e.preventDefault(),function(){x.apply(this,arguments)}(),console.log(d),j(""),O()},children:[Object(F.jsx)(M.a.Body,{children:Object(F.jsxs)(b.a.Group,{children:[Object(F.jsx)(b.a.Label,{children:"Frame Code"}),Object(F.jsx)(b.a.Control,{type:"text",required:!0,value:o,onChange:function(e){return j(e.target.value)}})]})}),Object(F.jsxs)(M.a.Footer,{children:[Object(F.jsx)(p.a,{variant:"secondary",onClick:O,style:{backgroundColor:"#212121",borderColor:"#212121"},children:"Close"}),Object(F.jsx)(p.a,{variant:"success",type:"submit",style:{backgroundColor:"#FF6B09",borderColor:"#FF6B09"},children:"Connect"})]})]})})]})},oe=function(e){var t=e.group;return Object(F.jsxs)(p.a,{to:{pathname:"/group/".concat(t.id),state:{group:t}},className:"text-truncate w-100",size:"lg",style:{backgroundColor:"rgba(0, 0, 0, 0)",marginLeft:"-7px",minWidth:"150px",maxWidth:"150px",borderColor:"#FF6B09"},as:N.b,children:[Object(F.jsx)(J.a,{icon:V.e,className:"mr-2",size:"3x",style:{color:"#212121"}}),Object(F.jsx)("p",{style:{color:"#FF6B09"},children:t.name})]})},ie=function(e){var t=e.file;return Object(F.jsxs)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline-dark text-truncate w-100",style:{marginLeft:"-7px",minWidth:"150px",maxWidth:"150px"},children:[Object(F.jsx)(J.a,{icon:V.b,className:"mr-2"}),t.name]})},le=function(e){var t=e.file;return Object(F.jsxs)("p",{className:"btn btn-outline-dark text-truncate w-100",style:{marginLeft:"-7px",minWidth:"150px",maxWidth:"150px"},children:[Object(F.jsx)(J.a,{icon:V.a,className:"mr-2"}),t.text]})},ue=r(105),je=function(e){var t=e.currentGroup,r=t===Y?[]:[Y];return t&&(r=[].concat(Object(H.a)(r),Object(H.a)(t.path))),Object(F.jsxs)(ue.a,{className:"flex-grow-1",listProps:{className:"bg-transparent m-0"},children:[r.map((function(e,t){return Object(F.jsx)(ue.a.Item,{linkAs:N.b,linkProps:{to:{pathname:e.id?"/group/".concat(e.id):"/",state:{group:Object(h.a)(Object(h.a)({},e),{},{path:r.slice(1,t)})}}},className:"text-truncate d-inline-block",style:{maxWidth:"150px",color:"#FF6B09"},children:e.name},e.id)})),t&&Object(F.jsx)(ue.a.Item,{className:"text-truncate d-inline-block",style:{maxWidth:"200px"},active:!0,children:t.name})]})},de=function(){var e=Object(B.i)().groupId,t=Object(B.h)().state,r=$(e,(void 0===t?{}:t).group),c=r.group,n=r.groups,a=r.childFiles;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(P,{}),Object(F.jsx)("div",{style:{height:"100%",backgroundColor:"#F6D7AF"},children:Object(F.jsxs)(S.a,{fluid:!0,children:[Object(F.jsx)("div",{className:"d-flex align-items-center",children:Object(F.jsx)(je,{currentGroup:c,style:{backgroundColor:"#F6D7AF"}})}),Object(F.jsx)("div",{children:!(c===Y)&&Object(F.jsxs)("div",{children:[Object(F.jsxs)("p",{style:{fontWeight:"bold"},children:["Group Code: ",e]}),Object(F.jsxs)("div",{className:"d-flex",children:[Object(F.jsx)(ne,{currentGroup:c}),Object(F.jsx)(ae,{currentGroup:c})]})]})}),Object(F.jsx)("div",{children:c===Y&&Object(F.jsxs)("div",{children:[Object(F.jsx)(ee,{currentGroup:c}),Object(F.jsx)(se,{})]})}),n.length>0&&Object(F.jsx)("div",{className:"d-flex flex-wrap",children:n.map((function(e){return Object(F.jsx)("div",{style:{maxWidth:"250px"},className:"p-2",children:Object(F.jsx)(oe,{group:e})},c.id)}))}),n.length>0&&a.length>0&&Object(F.jsx)("hr",{}),a.length>0&&Object(F.jsx)("div",{className:"d-flex flex-wrap",children:a.map((function(e){return Object(F.jsxs)("div",{style:{maxWidth:"250px"},className:"p-2",children:[!e.isText&&Object(F.jsx)(ie,{file:e}),e.isText&&Object(F.jsx)(le,{file:e})]},e.id)}))})]})})]})},be=function(){var e=Object(B.i)().groupId,t=Object(B.h)().state,r=$(e,(void 0===t?{}:t).group).childFiles,n=Object(c.useState)(0),a=Object(u.a)(n,2),s=a[0],o=a[1];return Object(F.jsx)("div",{style:{height:"100%",position:"relative",backgroundColor:"black"},children:r[s]&&Object(F.jsxs)("div",{children:[!r[s].isText&&Object(F.jsx)("div",{style:{transform:"translate(0, 50%)",backgroundColor:"black"},children:Object(F.jsx)("img",{src:r[s].url,alt:"example",width:"100%"})}),r[s].isText&&Object(F.jsx)("div",{style:{backgroundColor:"white"},children:Object(F.jsx)(G,{children:Object(F.jsx)("h1",{children:r[s].text})})}),Object(F.jsxs)("div",{className:"ml-auto",children:[(console.log(s),Object(F.jsx)(p.a,{variant:"secondary",onClick:function(){s+1===r.length?o(0):o(s+1)},style:{fontSize:"20px",left:"6vw",bottom:"1vh",backgroundColor:"#212121",borderColor:"#212121",position:"absolute"},children:">"})),(console.log(s),Object(F.jsx)(p.a,{variant:"secondary",onClick:function(){o(s-1===-1?r.length-1:s-1)},style:{fontSize:"20px",left:"1vw",bottom:"1vh",backgroundColor:"#212121",borderColor:"#212121",position:"absolute"},children:"<"})),Object(F.jsx)("h1",{style:{color:"white",margin:"0",bottom:"0",right:"0",padding:"1vh 30px",backgroundColor:"#0099FF",position:"absolute"},children:r[s].username})]})]})})};r(88);var pe=function(){return Object(F.jsx)(N.a,{basename:"/dissertation-webapp",children:Object(F.jsx)(k,{children:Object(F.jsxs)(B.d,{children:[Object(F.jsx)(R,{exact:!0,path:"/",component:de}),Object(F.jsx)(R,{exact:!0,path:"/group/:groupId",component:de}),Object(F.jsx)(B.b,{exact:!0,path:"/viewer/:groupId",component:be}),Object(F.jsx)(R,{path:"/user",component:W}),Object(F.jsx)(R,{path:"/update-profile",component:z}),Object(F.jsx)(B.b,{path:"/signup",component:E}),Object(F.jsx)(B.b,{path:"/login",component:U}),Object(F.jsx)(B.b,{path:"/forgot-password",component:q})]})})})};r(89);s.a.render(Object(F.jsx)(n.a.StrictMode,{children:Object(F.jsx)(pe,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.c4fd13a7.chunk.js.map